function insertTinySmile(i){tinymce.activeEditor.insertContent(i.outerHTML)}tinymce.PluginManager.add("smiles",function(i,t){if(!i.settings.smiles_url)return!1;var e=[],n=function(){return i.windowManager.open({title:"Insert smiles",body:{type:"panel",items:[{type:"htmlpanel",html:'<div class="tox-form__group tox-form__group--collection"><div class="tox-collection tox-collection--grid"><div class="tox-collection__group smilepanel">'+e.join("")+"</div></div></div>"}]},buttons:[{type:"cancel",text:"Close",primary:!0}]})};return i.ui.registry.addButton("smiles",{tooltip:"Insert smiles",icon:"emoji",onAction:function(){0<e.length?n():$.post(i.settings.smiles_url,{},function(i){if(i.smiles){for(var t in i.smiles)e.push('<div class="tox-collection__item"><div class="tox-collection__item-icon"><img class="smile_image" onclick="insertTinySmile(this);" title=":'+t+':" src="'+i.smiles[t]+'" /></div></div>');n()}},"json")}}),{getMetadata:function(){return{name:"Smiles",url:"https://instantcms.ru/"}}}});